<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
  </head>
  <body style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
    <h2 style="color: #cf112a;">
      {{ i18n.t('emails.invoice_heading', { id: invoiceId }) }}
    </h2>
    <p>
      {{ i18n.t('emails.invoice_intro', { buyerName, supplierName }) }}
    </p>

    @if(qrImageData)
      <div
        style="text-align: center; margin: 24px 0; padding: 16px; background: #f9f9f9; border: 1px solid #ddd; border-radius: 6px;"
      >
        <p style="margin: 0 0 12px; font-weight: bold;">
          {{ i18n.t('emails.invoice_qr_heading') }}
        </p>
        <img
          src="{{ qrImageData }}"
          alt="QR platba"
          width="220"
          height="220"
          style="display: block; margin: 0 auto;"
        />
      </div>
    @end
    
    <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
      <tr style="background: #cf112a; color: white;">
        <th style="padding: 10px; text-align: left;">
          {{ i18n.t('emails.purchase_product') }}
        </th>
        <th style="padding: 10px; text-align: right;">
          {{ i18n.t('emails.purchase_price') }}
        </th>
        <th style="padding: 10px; text-align: center;">
          {{ i18n.t('emails.purchase_date') }}
        </th>
      </tr>
      @each((order, orderIndex) in orders)
        <tr style="background: {{ orderIndex % 2 !== 0 ? '#f5f5f5' : '#fff' }};">
          <td style="padding: 8px; border: 1px solid #ddd;">
            {{ order.productName }}
          </td>
          <td style="padding: 8px; border: 1px solid #ddd; text-align: right;">
            {{ i18n.t('common.price_with_currency', { price: order.price }) }}
          </td>
          <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">
            {{ order.date }}
          </td>
        </tr>
      @end
      <tr style="background: #333; color: white;">
        <td style="padding: 10px;">
          <strong>{{ i18n.t('emails.invoice_total') }}</strong>
        </td>
        <td style="padding: 10px; text-align: right;" colspan="2">
          <strong>{{ i18n.t('common.price_with_currency', { price: totalCost }) }}</strong>
        </td>
      </tr>
    </table>
    @if(supplierIban)
      <p>
        {{ i18n.t('emails.invoice_iban') }} <strong>{{ supplierIban }}</strong>
      </p>
    @end
    <p>
      {{ i18n.t('emails.invoice_note') }}
    </p>
    @if(confirmPaymentUrl)
      <p style="margin: 20px 0; text-align: center;">
        <a
          href="{{ confirmPaymentUrl }}"
          style="background-color: #4CAF50; color: #fff; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block; font-weight: bold;"
        >
          ✓ {{ i18n.t('emails.invoice_confirm_payment') }}
        </a>
      </p>
    @end
    <p style="color: #666; font-size: 12px;">
      — <a href="{{ appUrl }}" style="color: #cf112a; text-decoration: none;">{{ i18n.t('common.app_name') }}</a>
    </p>
  </body>
</html>
