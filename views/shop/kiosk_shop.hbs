<section>
  <div class="row my-3">
    <div class="col">
      <div class="card text-center mx-auto h-100">
        <div class="card-body py-1">
          <div class="row">
            <div class="col-lg mb-3">
              <form action="/kiosk_keypad" method="get">
                <input type="submit" value="Zpět" name="Submit" id="Submit"
                  class="form-control btn btn-danger btn-block waves-effect" />
                </form>
            </div>
            <div class="col-lg mb-3">
              <input type="button" value="{{customer.displayName}}" name="customerName" id="customerName"
                class="form-control btn btn-outline disabled btn-block" />
            </div>
            <div class="col-lg mb-3">
              <input
                type='button'
                value='3m 00s'
                name='timer'
                id='timer'
                class='form-control float-end btn btn-outline disabled btn-block'
              />
            </div>
          </div>
          {{#if categories}}
            <div class="row">
              <div class="col mb-3">
                <input type="radio" class="btn btn-check" name="product-filter" id="all" autocomplete="off" onclick="show_all_categories()" checked>
                <label class="form-control btn btn-outline-primary" for="all">Vše</label>
              </div>
              {{#each categories}}
              <div class="col mb-3">
                <input type="radio" class="btn-check" name="product-filter" id="drinks" autocomplete="off" onclick="filter_categories('{{this._id}}')">
                <label class="form-control btn btn-outline-primary" for="drinks"><i style="color: {{this.color}}" class="fa-solid fa-circle"></i> {{this.name}}</label>
              </div>
              {{/each}}
            </div>
          {{/if}}
        </div>
      </div>
    </div>
  </div>
  <div class="row">
  {{# each products }}
    <div class="col-12 col-md-6 col-xl-3 col-xxxl-2 py-3">
      <form id="shop_buy_product_{{this.stock.0._id}}" name="shop_buy_product" class="needs-validation h-100" method="POST" action="/kiosk_shop" novalidate>
        <div class="card h-100 text-center">
          <div class="card-header h4">
            <header>{{ this.displayName }}</header>
          </div>
          <div class="card-body">
            <img src="{{ this.imagePath }}" class="mx-auto my-2 img-fluid shop-image-thumbnail"
            alt="{{ this.description }}">
          </div>
          <div class="card-footer">
            <div class="row">
              <div class="col-6 text-start">
                {{#if this.stock.0.amount_left}}
                <i class="fas fa-boxes"></i> {{ this.stockSum }}
                {{else}}
                <i class="fas fa-boxes"></i> <span class="text-danger">0</span>
                {{/if }}
              </div>
              <div class="col-6 text-right">
                {{#if this.stock.0.price }}
                <div class="btn btn-lg py-0 float-end">{{ this.stock.0.price }} Kč</div>
                <input type="hidden" name="product_price" class="btn" value="{{ this.stock.0.price }}"
                  readonly>
                {{/if}}
              </div>
            </div>
            <input type="hidden" id="product_id" name="product_id" value="{{ this.stock.0._id }}">
            <input type="hidden" id="user_id" name="user_id" value="{{ ../user.id }}">
            <input type="hidden" id="customer_id" name="customer_id" value="{{ ../customer.keypadId }}">
            <input type="hidden" id="display_name" name="display_name" value="{{ this.displayName }}">
            <input type="hidden" id="image_path" name="image_path" value="{{ this.imagePath }}">
            <input type="hidden" name="_csrf" value="{{ ../csrfToken }}">
          </div>
        </div>
      </form>
    </div>
  {{/each}}
  </div>
</section>

<script type="text/javascript" src="/javascripts/kiosk_shop.js"></script>